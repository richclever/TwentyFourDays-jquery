(function(a){a.fn.addCaptions=function(c){var d={attributes:["longdesc","title","alt"],exclude:{src:[/recaptcha/]},allowBlankCaption:true,selector:"img",removeFloat:true,containerElement:"div",containerClass:"caption",titleElement:"p",titleClass:"caption-title",imageClass:""};a.extend(d,c||{});var b=a(this).find(d.selector);if(b.length){a.each(b,function(){for(var j in d.exclude){if(this[j]){for(var g=0;g<d.exclude[j].length;g++){if(this[j].match(d.exclude[j][g])){return}}}}var h=a(this).parent().get(0);if(h.tagName.toLowerCase()==d.containerElement&&a(h).hasClass(d.containerClass)){return true}var f="";for(var g=0;g<d.attributes.length;g++){f=a(this).attr(d.attributes[g]);if(f){break}}if(!f&&!d.allowBlankCaption){return true}var e=a(this).css("float");if(d.removeFloat){a(this).css("float","none")}if(d.imageClass){a(this).addClass(d.imageClass)}a(this).wrap("<"+d.containerElement+' class="'+d.containerClass+'" style="float: '+e+';"></'+d.containerElement+">");if(f){a(this).after("<"+d.titleElement+' class="'+d.titleClass+'">'+f+"</"+d.titleElement+">")}})}}})(jQuery);